<!doctype html>
<html lang="no" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="description" content="Jaktopplevelsen - Din digitale jaktdagbok med GPS-sporing" />
    <meta name="theme-color" content="#1d6c45" />
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Jaktlogg" />
    <link rel="apple-touch-icon" href="/logo.png" />

    <!-- Preload fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <title>Jaktopplevelsen - Premium</title>
  </head>
  <body class="bg-background text-text-primary">
    <!-- PWA Loading Screen -->
    <div id="app-loader" style="position:fixed;inset:0;background:#09090b;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.3s">
      <img src="/logo.png" alt="Jaktopplevelsen" style="width:80px;height:80px;margin-bottom:24px;border-radius:16px">
      <div style="color:#fafafa;font-size:20px;font-weight:600;font-family:Inter,sans-serif;margin-bottom:8px">Jaktopplevelsen</div>
      <div id="load-msg" style="color:#71717a;font-size:13px;font-family:Inter,sans-serif;margin-bottom:20px">Laster...</div>
      <div style="width:200px;height:3px;background:#27272a;border-radius:2px;overflow:hidden">
        <div id="load-bar" style="height:100%;width:0%;background:linear-gradient(90deg,#1d6c45,#22c55e);transition:width 0.15s"></div>
      </div>
      <div id="load-pct" style="color:#52525b;font-size:11px;font-family:Inter,sans-serif;margin-top:8px">0%</div>
    </div>
    <script>
      (function(){
        var msgs=['Forbereder jaktlogg...','Laster data...','Snart klar...'];
        var p=0,i=0,bar=document.getElementById('load-bar'),pct=document.getElementById('load-pct'),msg=document.getElementById('load-msg');
        function tick(){
          if(p<90){p+=Math.random()*15+5;if(p>90)p=90;}
          bar.style.width=Math.min(p,100)+'%';pct.textContent=Math.round(p)+'%';
          if(p<30)msg.textContent=msgs[0];else if(p<70)msg.textContent=msgs[1];else msg.textContent=msgs[2];
          if(p<90)setTimeout(tick,150+Math.random()*100);
        }
        tick();
        window.hideLoader=function(){p=100;bar.style.width='100%';pct.textContent='100%';msg.textContent='Klar!';
          setTimeout(function(){document.getElementById('app-loader').style.opacity='0';
            setTimeout(function(){document.getElementById('app-loader').remove();},300);
          },200);
        };
      })();
    </script>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Register Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js').catch(() => {});
        });
      }
    </script>
  </body>
</html>
